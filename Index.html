<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Kirana Manager</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>

<h1>Kirana Manager</h1>

<!-- ADD STOCK -->
<section>
  <h2>Add Stock</h2>
  <input id="name" placeholder="Item Name">
  <input id="barcode" placeholder="Barcode (Optional)">
  <input id="qty" type="number" placeholder="Quantity">
  <input id="cp" type="number" placeholder="Cost Price">
  <input id="sp" type="number" placeholder="Selling Price">
  <button id="addStockBtn">Add Item</button>
</section>

<!-- SELL ITEM -->
<section>
  <h2>Sell Item</h2>
  <input id="sellName" placeholder="Item Name">
  <input id="sellQty" type="number" placeholder="Quantity Sold">
  <button id="sellBtn">Sell</button>
</section>

<!-- ADD EXPENSE -->
<section>
  <h2>Add Expense</h2>
  <input id="expenseName" placeholder="Expense Name">
  <input id="expenseAmount" type="number" placeholder="Amount">
  <button id="addExpenseBtn">Add Expense</button>
</section>

<!-- PROFIT SUMMARY -->
<section>
  <h2>Profit Summary</h2>
  <p id="dailyProfit">Today's Profit: ₹0</p>
  <p id="monthlyProfit">This Month's Profit: ₹0</p>
  <p id="netProfit">Net Profit (After Expenses): ₹0</p>
</section>

<!-- STOCK LIST -->
<section>
  <h2>Stock List <span class="toggle" onclick="toggleSection('stockListSection')">&#9654;</span></h2>
  <input id="stockSearch" placeholder="Search Stock..." oninput="searchStock()">
  <div id="stockListSection">
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>CP</th>
          <th>SP</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="stockTable"></tbody>
    </table>
  </div>
</section>

<!-- SALES HISTORY -->
<section>
  <h2>Sales History <span class="toggle" onclick="toggleSection('salesSection')">&#9654;</span></h2>
  <input type="date" id="filterDate" onchange="filterHistory()">
  <input id="salesSearch" placeholder="Search Sales..." oninput="searchSales()">
  <div id="salesSection">
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Profit</th>
        </tr>
      </thead>
      <tbody id="historyTable"></tbody>
    </table>
  </div>
</section>

<!-- UDHAAR MANAGEMENT -->
<section>
  <h2>Udhaar Management <span class="toggle" onclick="toggleSection('udhaarSection')">&#9654;</span></h2>
  <input id="udhaarName" placeholder="Customer/Supplier Name">
  <select id="udhaarType">
    <option value="lend">Lend (Customer)</option>
    <option value="borrow">Borrow (Supplier)</option>
  </select>
  <input id="udhaarAmount" type="number" placeholder="Amount">
  <button id="addUdhaarBtn">Add Udhaar</button>
  <input id="udhaarSearch" placeholder="Search Udhaar..." oninput="searchUdhaar()">
  <div id="udhaarSection">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Total</th>
          <th>Paid</th>
          <th>Remaining</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="udhaarTable"></tbody>
    </table>
  </div>
</section>

<!-- BACKUP / RESTORE -->
<section>
  <h2>Backup / Restore</h2>
  <button onclick="backupData()">Backup Data</button>
  <input type="file" id="restoreFile" style="display:none;" onchange="restoreData(event)">
  <button onclick="document.getElementById('restoreFile').click()">Restore Data</button>
</section>

<!-- LOW STOCK POPUP -->
<div id="lowStockPopup" class="popup">
  <div class="popup-content">
    <h3>Low Stock Items</h3>
    <ul id="lowStockList"></ul>
    <button onclick="closeLowStock()">OK</button>
  </div>
</div>

<section>
  <button id="resetMonthBtn">Reset Month</button>
</section>

<script src="main.js"></script>
</body>
    </html>
        
